<!-- Include the header partial -->
<% scripts.push('underscore-min.js') %>
<% include _header %>
<% include _headerBar %>

    <h1>Prediktor</h1>
    <div class="main_content">
	<div class="dateBox">Matches on <%= fordate %></div>
  	<% matches.forEach(function(match, counter) { %>
		<% var matchPred = _.find(prediktions, function(pred){ %>
			<% return pred?pred.get('match').id === match.id:false; %>
		<% }); %>
  		<div class="matchBox">
			<form method='post' action="<%= '/seasons/' + season.id +'/matches/' + match.id + '/prediktions' %>">
				<div><%= match.get("description") %></div>
				<div><%= match.get("groupName") %></div>
				<div><%= formatTime(match.get("matchDate")) %></div>
				<div><%= (match.get("matchDate")) %></div>
				<div><%= match.get("venue")[0].fullName %></div>
				<div class="teams">
					<% var teams = match.get("teams") %>
					<% teams.forEach(function(team) { %>
						<% include _team %>
					<% }) %>
				</div>
				<% if(!matchPred){ %>
					<input type='submit' class="btn_submit" value="Predikt" />
				<% } %>
				<input type='submit' class="btn_submit" value="Predikt" />
			</form>
  		</div>
    <% }) %>
</div>
    
<!-- Include the footer partial -->
<% include _footer %>